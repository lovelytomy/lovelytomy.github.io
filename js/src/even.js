(function(){"use strict";var t={};t.search={_searchData:null,_contentCache:null,_toggleSearch:function(){var t=$(".menu-search"),e=$("#search-input");$("#open-search").click(function(){t.addClass("expanded"),e.focus(),this._fetchSearchData()}.bind(this)),$("#close-search").click(function(){t.removeClass("expanded"),e.val(""),this._contentCache&&$("#content").replaceWith(this._contentCache)}.bind(this))},_fetchSearchData:function(){var t="/search.xml";if(!this._searchData){var e=this;$.ajax({url:t,dataType:"xml",success:function(t){e._searchData=$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get()}})}},_filterSearchData:function(t){var e=new RegExp(t,"i");return this._searchData.filter(function(t){return e.test(t.title)||e.test(t.content)})},_generateSearchContent:function(t){var e="";return t.length>0?t.map(function(t){e+='<article class="post">',e+='<header class="post-header"><h1 class="post-title"><a class="post-link" href="'+t.url+'">'+t.title+"</a></h1></header>",e+='<div class="post-content">'+t.content.split('<a id="more"></a>')[0]+'<div class="read-more"><a href="'+t.url+'" class="read-more-link">Read more..</a></div></div>',e+="</article>"}):e+='<div class="no-result"><h2>No result found!</h2></div>',e='<div id="content" class="content" ><section class="search-result post">'+e+"</section></div>"},_getSearchResult:function(){var t=$("#search-input");this._contentCache=$("#content").clone();var e=this;t.on("input",function(){var t=this.value.trim();if(0==t.length)return void $("#content").replaceWith(e._contentCache);var n=e._filterSearchData(t),o=e._generateSearchContent(n);$("#content").replaceWith(o)}),t.keydown(function(t){if(27==t.keyCode&&$("#close-search").click(),13==t.keyCode)return!1})},register:function(){this._toggleSearch(),this._getSearchResult()}},t.backToTop={register:function(){var t=$("#back-to-top");$(window).scroll(function(){$(window).scrollTop()>100?t.fadeIn(1e3):t.fadeOut(1e3)}),t.click(function(){$("body").animate({scrollTop:0})})}},t.postToc={_tocBlockFollow:function(){var t=20,e=$(".post-toc"),n=$(".post-footer");if(e.length){var o=e.offset().top-t,c=n.offset().top-e.height()-t,a={start:{position:"absolute",top:o},process:{position:"fixed",top:t},end:{position:"absolute",top:c}};$(window).scroll(function(){var t=$(window).scrollTop();t<o?e.css(a.start):t>c?e.css(a.end):e.css(a.process)})}},_tocLinkJump:function(){var t=30,e=$(".toc-link"),n=$(".headerlink"),o=$.map(n,function(t){return $(t).offset().top});$(window).scroll(function(){for(var n=$(window).scrollTop(),c=0;c<e.length;c++){var a=c+1===e.length,i=o[c]-t,s=a?1/0:o[c+1]-t;i<n&&n<=s?$(e[c]).addClass("active"):$(e[c]).removeClass("active")}})},register:function(){this._tocBlockFollow(),this._tocLinkJump()}},t.mobileNavbar={_navbarScroll:function(){var t=$("#header");$(window).scroll(function(){var e=$(window).scrollTop(),n=$(".mobile-navbar");e>t.height()?n.fadeIn():n.fadeOut()})},_toggleNavbarMenu:function(){var t=function(){$(this).hasClass("icon-click")?$(this).removeClass("icon-click").addClass("icon-out"):$(this).removeClass("icon-out").addClass("icon-click"),$(".mobile-menu").slideToggle(200)};$(".mobile-header-icon").click(t)},register:function(){this._navbarScroll(),this._toggleNavbarMenu()}},t.fancybox={register:function(){$(".post").each(function(){$(this).find("img").each(function(){$(this).wrap('<a class="fancybox" href="'+this.src+'" title="'+this.alt+'"></a>')})}),$.fancybox&&$(".fancybox").fancybox({openEffect:"elastic",closeEffect:"elastic"})}},this.Even=t}).call(this);